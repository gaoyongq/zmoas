#set($layout = "layout/empty.vm")
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/tr/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>1111</title>
##    <script type="text/javascript" src="../../../js/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="../../../js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../../js/jquery.colorbox-min.js"></script>
##    <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
##    <!-- 导入easyui类库 -->
##    <link id="easyuiTheme" rel="stylesheet" type="text/css" href="../../js/easyui/themes/default/easyui.css">
##    <link rel="stylesheet" type="text/css" href="../../js/easyui/themes/icon.css">
##    <link rel="stylesheet" type="text/css"  href="../../css/default.css">
##    <script type="text/javascript" src="../../js/easyui/jquery.easyui.min.js"></script>
    <!-- 导入ztree类库 -->
##    <link rel="stylesheet" href="../../js/ztree/zTreeStyle.css"  type="text/css" />
##    <script  src="../../js/ztree/jquery.ztree.all-3.5.js" type="text/javascript"></script>
##    <script src="../../js/easyui/locale/easyui-lang-zh_CN.js" type="text/javascript"></script>
##    <link href="../../css/sys.css" type="text/css" rel="stylesheet" />

    <script language="javascript" src="../../js/jquery_treeview/jquery.treeview.js"></script>
    <link type="text/css" rel="stylesheet" href="../../js/style/blue/file.css" />
    <link type="text/css" rel="stylesheet" href="../../js/jquery_treeview/jquery.treeview.css" />
    <link rel="stylesheet" href="../../css/zmoaStyle.css">
    <link rel="stylesheet" href="../../css/Font-Awesome-3.2.1/css/font-awesome.css">


##    <script language="javascript" src="../../js/jquery_treeview/jquery.treeview.js"></script>
##    <link type="text/css" rel="stylesheet" href="../../js/jquery_treeview/jquery.treeview.css" />

    <script type="text/javascript" src="../../../js/jquery-1.9.1.js"></script>
##    ##图片上传
##    <link href="../../../uploadify-v2.1.4/css/default.css" rel="stylesheet" type="text/css" />
##    <link href="../../../uploadify-v2.1.4/uploadify.css" rel="stylesheet" type="text/css" />
##    <script type="text/javascript" src="../../../uploadify-v2.1.4/js/swfobject.js"></script>
##    <script type="text/javascript" src="../../../uploadify-v2.1.4/js/jquery.uploadify.v2.1.4.min.js"></script>

##表格样式
##    <style type="text/css">
##        li ul {margin:0px;padding:0px;list-style:none;}
##        .t1
##        {
##            clear: both;
##            border: 1px solid #c9dae4;
##        }
##        .t1 tr th
##        {
##            color: #0d487b;
##            background: #f2f4f8 url(../CSS/Table/images/sj_title_pp.jpg) repeat-x left bottom;
##            line-height: 28px;
##            border-bottom: 1px solid #9cb6cf;
##            border-top: 1px solid #e9edf3;
##            font-weight: normal;
##            text-shadow: #e6ecf3 1px 1px 0px;
##            /*padding-left: 5px;*/
##            /*padding-right: 5px;*/
##        }
##        .t1 tr td
##        {
##            border-bottom: 1px solid #e9e9e9;
##            /*padding-bottom: 5px;*/
##            /*padding-top: 5px;*/
##            color: #444;
##            border-top: 1px solid #FFFFFF;
##            /*padding-left: 5px;*/
##            /*padding-right: 5px;*/
##            word-break: break-all;
##        }
##        /* white-space:nowrap; text-overflow:ellipsis; */
##        tr.alt td
##        {
##            background: #ecf6fc; /*这行将给所有的tr加上背景色*/
##        }
##        tr.over td
##        {
##            background: #bcd4ec; /*这个将是鼠标高亮行的背景色*/
##        }
##    </style>

    <script type="text/javascript">
        function getElements() {
//            var x=document.getElementsByName("myInput");
//            alert(x.length);

            var money = 0;
            var moneys = document.getElementsByName("itemMoney");
            for(var i=0;i<moneys.length;i++){
                money+=parseFloat(moneys[i].value);
            }

            $("#money").val(money);
            $("#money").attr("readonly",true);
        }
    </script>

    #*<script>
        function check(v) {
            var a=/^[0-9]*(\.[0-9]{1,2})?$/;
            if(!a.test(v)){
                alert("格式不正确");
                return false;
            }else{
                return true;
            }
        }
    </script>*#

    <script type="text/javascript">
        $(function(){
            $("#userName").attr("readonly",true);
//            //图片上传
//            $(".file_upload").uploadify({
//                'uploader'       : '../../../uploadify-v2.1.4/swf/uploadify.swf',
//                'script'         : '/ProductShow/insertProductFile.action',
//                'cancelImg'      : '../../../uploadify-v2.1.4/cancel.png',
//                'wmode': 'transparent',
//                'hideButton': true,
//                'auto': true,               //选定文件后是否自动上传，默认false
//                'multi': false,               //是否允许同时上传多文件，默认false
//                'fileExt': '*.jpg;*.bmp;*.png;*.gif',      //控制可上传文件的扩展名，启用本项时需同时声明fileDesc
//                'sizeLimit': 2097152,
//                'fileDataName':"file",
//                'onComplete':function(event,queueId,fileObj,response,data){
//
//                    $(event.target).parent().css("background","url("+response.replace("{0}","T128X130_").replace("\"","")+")");
//                    $(event.target).parents('.ImgUpload').find("input[type=hidden]").val(response);
//                }
//            });

            $("#save").click(function(){
                getElements();
                var result = document.getElementById("name").value;
                var result1 = document.getElementById("money").value;
                if(result == ""  ){
                    alert("报销单名称不能为空！");
                    return false;
                }
                if(result1 == ""  ){
                    alert("申请金额不能为空！");
                    return false;
                }
//                return false;
            document.getElementById("form1").submit();
            });
        });



    </script>
    <script type="text/javascript">
        $(document).ready(function () { //这个就是传说的ready
            $(".t1 tr").mouseover(function () {
                //如果鼠标移到class为stripe的表格的tr上时，执行函数
                $(this).addClass("over");
            }).mouseout(function () {
                //给这行添加class值为over，并且当鼠标一出该行时执行函数
                $(this).removeClass("over");
            }) //移除该行的class
            $(".t1 tr:even").addClass("alt");
            //给class为stripe的表格的偶数行添加class值为alt
        });
    </script>
    <script type="text/javascript">

        function addMonryItem(){
            var moneyName = $("#moneyNameAdd").val();
            var descriptionItem = document.getElementById("descriptionItemAdd").value;
            var moneyItem = $("#moneyItemAdd").val();
            $("#showMoneyManagerFormItem").append('<tr ><td>'+'<input style="border:0;width:100%;text-align:center;" name="itemMoneyName" value="'+moneyName+'"/></td><td>'+
            '<input style="border:0;width:100%;text-align:center;" name="itemDescription" value="'+descriptionItem+'"/></td><td><input style="border:0;width:100%;text-align:center;" name="itemMoney"  value="'+moneyItem+'"/>'+
            '</td><td align="center"> <a href="#"  onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode)">删除</a> </td></tr>');


            $("#moneyNameAdd").val('');
            $("#descriptionItemAdd").val('');
            $("#moneyItemAdd").val('');
        }
    </script>

##    <script type="text/javascript">
##        function delMonryItem(this){
##            this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);
##
##//            var money = $("#money").val();
##            var money = 0;
##            var moneys = document.getElementsByName("itemMoney");
##            for(var i=0;i<moneys.length-1;i++){
##                money+=Number((moneys[i].value).toFixed(2));
##            }
##            alert(money)
##            $("#money").val(money);
##            $("#money").attr("readonly",true);
##        }
##    </script>

</head>
<body>

## 报销主页面 wq
<div class="place">
    <span class="icon-reorder">&nbsp;位置：</span>
    <ul class="placeul">
        <li><a>费用详细信息</a></li>
    </ul>
</div>
<form action="/system/moneyManager_insert.action"  id="form1" method="post" enctype="multipart/form-data" >
            <input type="hidden" name="departmentName" value="$!departmentName" />
            <!-- 表单内容显示 -->
            <div style="height: 20px"></div>
            <div style="margin-right: 35%;margin-left:5%;margin-bottom: 20px;margin-top: 5px">
                    <table width="90%" class="formtable">
                        <tr>
                            <td width="15%">报销单名称:</td>
                            <td width="30%">
                                <input type="text"  id="name" name="name" value=""/>
                            </td>
                            <td width="15%">申请人:</td>
                            <td width="30%">
                                <input type="text"  id="userName" name="userName" value="$!username"/>
                            </td>
                        </tr>
                        <tr><td>支出方式:</td>
                            <td>
                                <input type="radio" name="moneyType" value="1" checked="checked">预支
                                <input type="radio"  name="moneyType" value="2">申请
                            </td>
                            <td>申请金额:</td>
                            <td>
                                <input type="text" id="money" name="money" value=""  onkeyup= "if( ! /^[0-9]*(\.[0-9]{0,2})?$/.test(this.value)){alert('只能输入数字，小数点后只能保留两位');this.value='';}"/>
                            </td>
                        </tr>
                        <tr><td >备注信息:</td>
                            <td colspan = "3">
                            ##                                    <input  value="$!moneyManagers.description" />
                                <textarea  name="description" style="width:432px;height:60px;resize: none;" value="" ></textarea>
                            ##                                    <textarea value="$!moneyManagers.description"></textarea>
                            </td>
                        </tr>
##                        <tr><td >图片上传</td>
##                            <td colspan = "3" rowspan="2">
##                            ##                                    <input  value="$!moneyManagers.description" />
##                                <input  class="true" style="width:802px;height:50px;" name="description" value="" />
##                            ##                                    <textarea value="$!moneyManagers.description"></textarea>
##                            </td>
##                        </tr>
                    </table>
            </div>
            <div style="height: 1px"></div>
            <div style="margin-right: 35%;margin-left:5%;margin-bottom: 20px;margin-top: 5px">
        <table width="90%" class="formtable">
            <tr>
                <td width="15%">费用名称:</td>
                <td width="30%"><input type="text" id="moneyNameAdd" name="moneyNameAdd" /></td>
                <td width="15%">金额:</td>
##                onkeyup= "if( ! /^[0-9]*(\.[0-9]{0,2})?$/.test(this.value)){alert('只能输入数字，小数点后只能保留两位');this.value='';}"

                <td width="30%"><input type="text" id="moneyItemAdd" name="moneyItemAdd" onkeyup= "if( ! /^[0-9]*(\.[0-9]{0,2})?$/.test(this.value)){alert('只能输入数字，小数点后只能保留两位');this.value='';}" /></td>
            </tr>
            <tr>
                <td>
                    申请说明:
                </td>
                <td colspan = "3">
                    <textarea style="width:432px;height:60px;resize: none;" id="descriptionItemAdd" ></textarea>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="text-align: center;height: 20px">
                    <input class="button border-blue icon-pencil" type="button" value="添加" onclick="addMonryItem()"/>
                </td>
            </tr>
        </table>
    </div>
##                    <div  style="margin-top:20px; margin-bottom: 20px;" >
##                        费用名称*<input type="text" id="moneyNameAdd" name="moneyNameAdd" />
##                        金额*<input type="text" id="moneyItemAdd" name="moneyItemAdd" /><br/>
####                        <input type="text" id="descriptionItemAdd" name="descriptionItemAdd" />
##                            <label style="float:left;line-height:60px;" >申请说明*</label>
##                            <textarea style="width:382px;height:40px;resize: none;" id="descriptionItemAdd" ></textarea>
##                            <input type="button" value="新增" onclick="addMonryItem()" />
##                    </div>
                    <div class = "moneyItemUi">
                        <table id = "showMoneyManagerFormItem" class="table" >
                            <tr>
                                <th>费用名称</th>
                                <th>申请说明</th>
                                <th>金额</th>
                                <th>操作</th>
                            </tr>

                        </table>
                    </div>


            <div id="InputDetailBar" style="margin-top:50px; margin-bottom: 5px;">
                <input name="file" type="file" class="dfinput" value="" />
            </div>
            <!-- 表单操作 -->
            <div  style="margin-top:20px;text-align: center" align="">
##                <input id="save" type="image" src="../../style/images/save.png"  />
##                <a href="javascript:history.go(-1);" ><img src="../../style/images/goBack.png">  </a>
                <button id="save" class="button border-green icon-check" type="submit"> 提交</button>&nbsp;
                <input type="button" class="button border-blue" value="返回" class="input-button" onclick="history.back();" />
            </div>
        </form>
</body>
</html>


