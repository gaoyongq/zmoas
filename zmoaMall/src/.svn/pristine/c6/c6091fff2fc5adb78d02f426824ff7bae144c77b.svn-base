<!DOCTYPE html>
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- 导入jquery核心类库 -->
    <script type="text/javascript"
            src="../../js/jquery-1.8.3.js"></script>
    <!-- 导入easyui类库 -->
    <link id="easyuiTheme" rel="stylesheet" type="text/css"
          href="../../js/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css"
          href="../../js/easyui/themes/icon.css">
    <link rel="stylesheet" type="text/css"
          href="../../css/default.css">
    <script type="text/javascript"
            src="../../js/easyui/jquery.easyui.min.js"></script>
    <!-- 导入ztree类库 -->
    <link rel="stylesheet"
          href="../../js/ztree/zTreeStyle.css"
          type="text/css" />
    <script
            src="../../js/ztree/jquery.ztree.all-3.5.js"
            type="text/javascript"></script>
    <script
            src="../../js/easyui/locale/easyui-lang-zh_CN.js"
            type="text/javascript"></script>
    <link href="../../css/sys.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript">

       $(function(){

            var setting = {

                data : {
                    simpleData : {
                        enable : true
                    }
                },
                callback : {
                    onClick:onClick,
                }
            };

            // 基本功能菜单加载
            jQuery.ajax({
                url : '/privileges/MenuList.action',
                type : 'POST',
                dataType : 'text',
                async: 'true',
                success : function(data) {

                    var zNodes = eval("(" + data + ")");

                    jQuery.fn.zTree.init($("#treeMenu"), setting, zNodes);
                },
                error : function(msg) {
                    alert('菜单加载异常!');
                }
            });



        })
       function onClick(event, treeId, treeNode, clickFlag) {
           // 判断树菜单节点是否含有 page属性
           if (treeNode.page!=undefined && treeNode.page!= "") {
               var content = '<div style="width:100%;height:100%;overflow:hidden;">'
                       + '<iframe src="'
                       + treeNode.page
                       + '" scrolling="auto" style="width:100%;height:100%;border:0;" ></iframe></div>';
               if ($("#tabs").tabs('exists', treeNode.name)) {// 判断tab是否存在
                   $('#tabs').tabs('select', treeNode.name); // 切换tab
                   var tab = $('#tabs').tabs('getSelected');
                   $('#tabs').tabs('update', {
                       tab: tab,
                       options: {
                           title: treeNode.name,
                           content: content
                       }
                   });
               } else {
                   // 开启一个新的tab页面
                   $('#tabs').tabs('add', {
                       title : treeNode.name,
                       content : content,
                       closable : true
                   });
               }
           }
       }
       //签到

//

//           // 判断树菜单节点是否含有 page属性
//
//               var name ='签到信息'
//               var content = '<div style="width:100%;height:100%;overflow:hidden;">'
//                       + '<iframe src="'
//                       + '/system/register.action'
//                       + '" scrolling="auto" style="width:100%;height:100%;border:0;" ></iframe></div>';
//               if ($("#tabs").tabs('exists',name)) {// 判断tab是否存在
//                   $('#tabs').tabs('select',.name); // 切换tab
//                   var tab = $('#tabs').tabs('getSelected');
//                   $('#tabs').tabs('update', {
//                       tab: tab,
//                       options: {
//                           title: name,
//                           content: content
//                       }
//                   });
//               } else {
//                   // 开启一个新的tab页面
//                   $('#tabs').tabs('add', {
//                       title : name,
//                       content : content,
//                       closable : true
//                   });
//               }
       //查看签到信息
       function register(){
           if($('#tabs').tabs('exists','签到信息')){
               //跳转到指定的选项卡页面
               $('#tabs').tabs('select', '签到信息');

           }else{
               var content = '<iframe scrolling="auto" frameborder="0" src=" ' + '/system/register.action' + '" style="width:100%;height:100%;"></ifrmae>';
               //添加选项卡
               $('#tabs').tabs('add', {
                   //选项卡标题
                   title: '签到信息',
                   //选项卡内容
                   content: content,
                   //选项卡面板显示关闭按钮
                   closable: true
               });
           }

       }

    </script>
    #*<style type="text/css">
        body{
            background-image: url(../images/oaxt.jpg);
            background-repeat: repeat-x;
        }
    </style>*#
</head>
<body class="easyui-layout"  >
   #* <div style="background-image:url(../images/oaxt.jpg);  ">*#


        <div data-options="region:'north',border:false"
             style="height:80px;padding:10px;background:url('../images/header_bg.png');background-size: 100%;">
            <div  id="subWarp" style="float:left;  height:15px; border:2px solid #0000FF;">
                <a  style="color:blue;text-decoration:underline; cursor: pointer;" onclick="register()"><img border="0" width="13" height="12" src="../../style/photo/d02.png" /> 签到<span id="mail"></span></a>
            </div>

             <div  id="exit" align="right" style="float:right; height:15px; border-left:2px solid #0000FF; border-right:2px solid #0000FF; border-top:2px solid #0000FF; border-bottom:2px solid #0000FF;">
                <a  href="/privileges/toExit.action" style="color:blue;text-decoration:underline; cursor: pointer;" ><img border="0" width="13" height="12" src="../../style/photo/close1.png" /> 退出<span id="mail"></span></a>
            </div>
            <div align="center">
            #* <h1 align="center" >兆美OA办公系统</h1>*#
                <font  size="12px">兆美OA办公系统</font>
            </div>
        </div>
        <div data-options="region:'west',split:true,title:'菜单导航'"
             style="width:200px; ">
            <div class="easyui-accordion" fit="true" border="false">
                <div title="基本功能" data-options="iconCls:'icon-mini-add'" style="overflow:auto">
                    <ul id="treeMenu" class="ztree"></ul>
                </div>
            </div>
        </div>
        <div data-options="region:'center'">
            <div id="tabs" fit="true" class="easyui-tabs" border="false">
    ##            <div title="消息中心" id="subWarp"
    ##                 style="width:100%;height:100%;overflow:hidden">
    ##                <iframe src=""style="width:100%;height:100%;border:0;"></iframe>
    ##            </div>
            </div>
        </div>
        <div data-options="region:'south',border:false"
             style="height:50px;padding:10px;background:url('../images/header_bg.png');background-size: 100%;">

        </div>
   #* </div>*#
 </body>
</html>

